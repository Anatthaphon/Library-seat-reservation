{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\natta\\\\Library-seat-reservation\\\\frontend\\\\src\\\\pages\\\\Planning.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { scheduleAPI } from '../services/api';\nimport WeeklyCalendar from '../components/WeeklyCalendar';\nimport EventPopup from '../components/EventPopup';\nimport '../styles/Planning.css';\nimport { useNavigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Planning = () => {\n  _s();\n  const [schedules, setSchedules] = useState([]);\n  const [currentDate, setCurrentDate] = useState(new Date());\n  const [showPopup, setShowPopup] = useState(false);\n  const [popupType, setPopupType] = useState(1);\n  const [selectedEvent, setSelectedEvent] = useState(null);\n  const [selectedDateTime, setSelectedDateTime] = useState(null);\n\n  // ✅ realtime clock\n  const [now, setNow] = useState(new Date());\n  const navigate = useNavigate();\n\n  // 1) ถ้าผู้ใช้ \"เลือก\" ช่อง/อีเวนต์ จะใช้ค่านั้น\n  const getSelectedSlot = () => {\n    if (selectedDateTime) {\n      return {\n        date: selectedDateTime.date,\n        startTime: selectedDateTime.startTime,\n        endTime: selectedDateTime.endTime || null,\n        scheduleId: null,\n        title: null\n      };\n    }\n    if (selectedEvent) {\n      var _selectedEvent$timeSl, _selectedEvent$timeSl2;\n      return {\n        date: selectedEvent.date,\n        startTime: (_selectedEvent$timeSl = selectedEvent.timeSlot) === null || _selectedEvent$timeSl === void 0 ? void 0 : _selectedEvent$timeSl.startTime,\n        endTime: (_selectedEvent$timeSl2 = selectedEvent.timeSlot) === null || _selectedEvent$timeSl2 === void 0 ? void 0 : _selectedEvent$timeSl2.endTime,\n        scheduleId: selectedEvent._id,\n        title: selectedEvent.title\n      };\n    }\n    return null;\n  };\n\n  // 2) ถ้ายังไม่ได้เลือกอะไร แต่มีแพลนอยู่แล้ว -> ใช้ \"แพลนล่าสุด\" เป็นค่า default\n  const getSlotForReservation = () => {\n    const selected = getSelectedSlot();\n    if (selected) return selected;\n    if (schedules.length > 0) {\n      var _last$timeSlot, _last$timeSlot2;\n      const last = schedules[schedules.length - 1];\n      return {\n        date: last.date,\n        startTime: (_last$timeSlot = last.timeSlot) === null || _last$timeSlot === void 0 ? void 0 : _last$timeSlot.startTime,\n        endTime: (_last$timeSlot2 = last.timeSlot) === null || _last$timeSlot2 === void 0 ? void 0 : _last$timeSlot2.endTime,\n        scheduleId: last._id,\n        title: last.title\n      };\n    }\n    return null;\n  };\n  const handleReserve = () => {\n    const slot = getSlotForReservation();\n    if (!slot) {\n      alert('ยังไม่มีแพลน กรุณาเพิ่มแพลนก่อนจองค่ะ');\n      return;\n    }\n    const d = new Date(slot.date);\n    if (d.getDay() === 0) {\n      alert('วันอาทิตย์ห้องสมุดปิด ไม่สามารถจองได้ค่ะ');\n      return;\n    }\n    navigate('/seat-map', {\n      state: slot\n    });\n  };\n  useEffect(() => {\n    loadSchedules();\n  }, [currentDate]);\n\n  // ✅ realtime update every 1 second\n  useEffect(() => {\n    const t = setInterval(() => setNow(new Date()), 1000);\n    return () => clearInterval(t);\n  }, []);\n  const loadSchedules = async () => {\n    try {\n      const dateStr = currentDate.toISOString().split('T')[0];\n      const response = await scheduleAPI.getByWeek(dateStr);\n      setSchedules(response.data);\n      console.log('Loaded schedules:', response.data);\n    } catch (error) {\n      console.error('Error loading schedules:', error);\n    }\n  };\n  const handleEventClick = event => {\n    setSelectedEvent(event);\n    setSelectedDateTime(null);\n    setPopupType(1);\n    setShowPopup(true);\n  };\n  const handleCellClick = dateTime => {\n    const clickedDate = new Date(dateTime.date);\n    if (clickedDate.getDay() === 0) {\n      alert('วันอาทิตย์ห้องสมุดปิด ไม่สามารถแพลนได้ค่ะ');\n      return;\n    }\n    setSelectedDateTime(dateTime);\n    setSelectedEvent(null);\n    setPopupType(1);\n    setShowPopup(true);\n  };\n  const handleSaveEvent = async eventData => {\n    try {\n      const user = {\n        id: '65842827e4b00a1234567890',\n        fullName: 'Mock User'\n      };\n      const duration = parseInt(eventData.timeSpent) || 1;\n      if (duration > 3) {\n        alert('สามารถจองได้สูงสุด 3 ชั่วโมงเท่านั้น');\n        return;\n      }\n      const startHour = selectedDateTime ? parseInt(selectedDateTime.startTime.split(':')[0]) : selectedEvent ? parseInt(selectedEvent.timeSlot.startTime.split(':')[0]) : 9;\n      const endHour = startHour + duration;\n      if (endHour > 18) {\n        alert('เวลาจองต้องไม่เกิน 18:00 น.');\n        return;\n      }\n      let eventDate;\n      if (selectedDateTime) {\n        eventDate = new Date(selectedDateTime.date);\n      } else if (selectedEvent) {\n        eventDate = new Date(selectedEvent.date);\n      } else {\n        eventDate = new Date();\n      }\n      if (eventDate.getDay() === 0) {\n        alert('วันอาทิตย์ห้องสมุดปิด ไม่สามารถแพลนได้ค่ะ');\n        return;\n      }\n      const localISOString = new Date(eventDate.getFullYear(), eventDate.getMonth(), eventDate.getDate(), 12, 0, 0, 0).toISOString();\n      const scheduleData = {\n        title: eventData.title || (selectedEvent === null || selectedEvent === void 0 ? void 0 : selectedEvent.title) || 'Event',\n        notes: eventData.notes || '',\n        date: localISOString,\n        dayOfWeek: eventDate.getDay(),\n        timeSlot: {\n          startTime: `${startHour.toString().padStart(2, '0')}:00`,\n          endTime: `${endHour.toString().padStart(2, '0')}:00`\n        },\n        duration,\n        instructor: user === null || user === void 0 ? void 0 : user.id,\n        instructorName: (user === null || user === void 0 ? void 0 : user.fullName) || 'Unknown',\n        room: (selectedEvent === null || selectedEvent === void 0 ? void 0 : selectedEvent.room) || `Room ${Math.floor(Math.random() * 400) + 100}`,\n        color: getColorByDay(eventDate),\n        type: 'lecture',\n        status: 'scheduled'\n      };\n      if (selectedEvent) {\n        await scheduleAPI.update(selectedEvent._id, scheduleData);\n      } else {\n        await scheduleAPI.create(scheduleData);\n      }\n      setShowPopup(false);\n      setSelectedDateTime(null);\n      setSelectedEvent(null);\n      await loadSchedules();\n      alert('Event saved successfully!');\n    } catch (error) {\n      var _error$response, _error$response$data;\n      console.error('Error saving event:', error);\n      alert('Error saving event: ' + (((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.error) || error.message));\n    }\n  };\n  const getColorByDay = dateObj => {\n    const d = dateObj.getDay();\n    const dayColors = {\n      1: '#facc15',\n      2: '#ec4899',\n      3: '#22c55e',\n      4: '#f97316',\n      5: '#06b6d4',\n      6: '#8b5cf6',\n      0: '#9ca3af'\n    };\n    return dayColors[d] || '#3b82f6';\n  };\n  const navigateWeek = direction => {\n    const newDate = new Date(currentDate);\n    newDate.setDate(newDate.getDate() + direction * 7);\n    setCurrentDate(newDate);\n  };\n  const formatDateRange = () => {\n    const startOfWeek = new Date(currentDate);\n    const currentDay = startOfWeek.getDay();\n    const diff = currentDay === 0 ? -6 : 1 - currentDay;\n    startOfWeek.setDate(startOfWeek.getDate() + diff);\n    const endOfWeek = new Date(startOfWeek);\n    endOfWeek.setDate(startOfWeek.getDate() + 6);\n    const months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];\n    return `${months[startOfWeek.getMonth()]} ${startOfWeek.getDate()} - ${endOfWeek.getDate()}, ${startOfWeek.getFullYear()}`;\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"planning-page\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"planning-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Planning\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"header-info\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Constructor\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\"Time \", now.getHours().toString().padStart(2, '0'), \":\", now.getMinutes().toString().padStart(2, '0')]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\"Day \", now.getDate(), \".\", (now.getMonth() + 1).toString().padStart(2, '0'), \".\", now.getFullYear().toString().slice(-2)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"calendar-controls\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => navigateWeek(-1),\n        children: \"\\u2190 Previous Week\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"date-range\",\n        children: formatDateRange()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => navigateWeek(1),\n        children: \"Next Week \\u2192\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 256,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(WeeklyCalendar, {\n      schedules: schedules,\n      onEventClick: handleEventClick,\n      onCellClick: handleCellClick,\n      currentDate: currentDate\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(EventPopup, {\n      isOpen: showPopup,\n      onClose: () => {\n        setShowPopup(false);\n        setSelectedDateTime(null);\n        setSelectedEvent(null);\n      },\n      onSave: handleSaveEvent,\n      eventData: selectedEvent,\n      type: popupType\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 269,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"reserve-btn\",\n      onClick: handleReserve,\n      disabled: schedules.length === 0,\n      children: \"Reserve\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 282,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 242,\n    columnNumber: 5\n  }, this);\n};\n_s(Planning, \"yY/uyPcBrloiLQzB6Db0jqjZD2I=\", false, function () {\n  return [useNavigate];\n});\n_c = Planning;\nexport default Planning;\nvar _c;\n$RefreshReg$(_c, \"Planning\");","map":{"version":3,"names":["React","useState","useEffect","scheduleAPI","WeeklyCalendar","EventPopup","useNavigate","jsxDEV","_jsxDEV","Planning","_s","schedules","setSchedules","currentDate","setCurrentDate","Date","showPopup","setShowPopup","popupType","setPopupType","selectedEvent","setSelectedEvent","selectedDateTime","setSelectedDateTime","now","setNow","navigate","getSelectedSlot","date","startTime","endTime","scheduleId","title","_selectedEvent$timeSl","_selectedEvent$timeSl2","timeSlot","_id","getSlotForReservation","selected","length","_last$timeSlot","_last$timeSlot2","last","handleReserve","slot","alert","d","getDay","state","loadSchedules","t","setInterval","clearInterval","dateStr","toISOString","split","response","getByWeek","data","console","log","error","handleEventClick","event","handleCellClick","dateTime","clickedDate","handleSaveEvent","eventData","user","id","fullName","duration","parseInt","timeSpent","startHour","endHour","eventDate","localISOString","getFullYear","getMonth","getDate","scheduleData","notes","dayOfWeek","toString","padStart","instructor","instructorName","room","Math","floor","random","color","getColorByDay","type","status","update","create","_error$response","_error$response$data","message","dateObj","dayColors","navigateWeek","direction","newDate","setDate","formatDateRange","startOfWeek","currentDay","diff","endOfWeek","months","className","children","fileName","_jsxFileName","lineNumber","columnNumber","getHours","getMinutes","slice","onClick","onEventClick","onCellClick","isOpen","onClose","onSave","disabled","_c","$RefreshReg$"],"sources":["C:/Users/natta/Library-seat-reservation/frontend/src/pages/Planning.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { scheduleAPI } from '../services/api';\r\nimport WeeklyCalendar from '../components/WeeklyCalendar';\r\nimport EventPopup from '../components/EventPopup';\r\nimport '../styles/Planning.css';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nconst Planning = () => {\r\n  const [schedules, setSchedules] = useState([]);\r\n  const [currentDate, setCurrentDate] = useState(new Date());\r\n  const [showPopup, setShowPopup] = useState(false);\r\n  const [popupType, setPopupType] = useState(1);\r\n  const [selectedEvent, setSelectedEvent] = useState(null);\r\n  const [selectedDateTime, setSelectedDateTime] = useState(null);\r\n\r\n  // ✅ realtime clock\r\n  const [now, setNow] = useState(new Date());\r\n\r\n  const navigate = useNavigate();\r\n\r\n  // 1) ถ้าผู้ใช้ \"เลือก\" ช่อง/อีเวนต์ จะใช้ค่านั้น\r\n  const getSelectedSlot = () => {\r\n    if (selectedDateTime) {\r\n      return {\r\n        date: selectedDateTime.date,\r\n        startTime: selectedDateTime.startTime,\r\n        endTime: selectedDateTime.endTime || null,\r\n        scheduleId: null,\r\n        title: null,\r\n      };\r\n    }\r\n\r\n    if (selectedEvent) {\r\n      return {\r\n        date: selectedEvent.date,\r\n        startTime: selectedEvent.timeSlot?.startTime,\r\n        endTime: selectedEvent.timeSlot?.endTime,\r\n        scheduleId: selectedEvent._id,\r\n        title: selectedEvent.title,\r\n      };\r\n    }\r\n\r\n    return null;\r\n  };\r\n\r\n  // 2) ถ้ายังไม่ได้เลือกอะไร แต่มีแพลนอยู่แล้ว -> ใช้ \"แพลนล่าสุด\" เป็นค่า default\r\n  const getSlotForReservation = () => {\r\n    const selected = getSelectedSlot();\r\n    if (selected) return selected;\r\n\r\n    if (schedules.length > 0) {\r\n      const last = schedules[schedules.length - 1];\r\n      return {\r\n        date: last.date,\r\n        startTime: last.timeSlot?.startTime,\r\n        endTime: last.timeSlot?.endTime,\r\n        scheduleId: last._id,\r\n        title: last.title,\r\n      };\r\n    }\r\n\r\n    return null;\r\n  };\r\n\r\n  const handleReserve = () => {\r\n    const slot = getSlotForReservation();\r\n\r\n    if (!slot) {\r\n      alert('ยังไม่มีแพลน กรุณาเพิ่มแพลนก่อนจองค่ะ');\r\n      return;\r\n    }\r\n\r\n    const d = new Date(slot.date);\r\n    if (d.getDay() === 0) {\r\n      alert('วันอาทิตย์ห้องสมุดปิด ไม่สามารถจองได้ค่ะ');\r\n      return;\r\n    }\r\n\r\n    navigate('/seat-map', { state: slot });\r\n  };\r\n\r\n  useEffect(() => {\r\n    loadSchedules();\r\n  }, [currentDate]);\r\n\r\n  // ✅ realtime update every 1 second\r\n  useEffect(() => {\r\n    const t = setInterval(() => setNow(new Date()), 1000);\r\n    return () => clearInterval(t);\r\n  }, []);\r\n\r\n  const loadSchedules = async () => {\r\n    try {\r\n      const dateStr = currentDate.toISOString().split('T')[0];\r\n      const response = await scheduleAPI.getByWeek(dateStr);\r\n      setSchedules(response.data);\r\n      console.log('Loaded schedules:', response.data);\r\n    } catch (error) {\r\n      console.error('Error loading schedules:', error);\r\n    }\r\n  };\r\n\r\n  const handleEventClick = (event) => {\r\n    setSelectedEvent(event);\r\n    setSelectedDateTime(null);\r\n    setPopupType(1);\r\n    setShowPopup(true);\r\n  };\r\n\r\n  const handleCellClick = (dateTime) => {\r\n    const clickedDate = new Date(dateTime.date);\r\n\r\n    if (clickedDate.getDay() === 0) {\r\n      alert('วันอาทิตย์ห้องสมุดปิด ไม่สามารถแพลนได้ค่ะ');\r\n      return;\r\n    }\r\n\r\n    setSelectedDateTime(dateTime);\r\n    setSelectedEvent(null);\r\n    setPopupType(1);\r\n    setShowPopup(true);\r\n  };\r\n\r\n  const handleSaveEvent = async (eventData) => {\r\n    try {\r\n      const user = { id: '65842827e4b00a1234567890', fullName: 'Mock User' };\r\n\r\n      const duration = parseInt(eventData.timeSpent) || 1;\r\n\r\n      if (duration > 3) {\r\n        alert('สามารถจองได้สูงสุด 3 ชั่วโมงเท่านั้น');\r\n        return;\r\n      }\r\n\r\n      const startHour = selectedDateTime\r\n        ? parseInt(selectedDateTime.startTime.split(':')[0])\r\n        : (selectedEvent ? parseInt(selectedEvent.timeSlot.startTime.split(':')[0]) : 9);\r\n\r\n      const endHour = startHour + duration;\r\n\r\n      if (endHour > 18) {\r\n        alert('เวลาจองต้องไม่เกิน 18:00 น.');\r\n        return;\r\n      }\r\n\r\n      let eventDate;\r\n      if (selectedDateTime) {\r\n        eventDate = new Date(selectedDateTime.date);\r\n      } else if (selectedEvent) {\r\n        eventDate = new Date(selectedEvent.date);\r\n      } else {\r\n        eventDate = new Date();\r\n      }\r\n\r\n      if (eventDate.getDay() === 0) {\r\n        alert('วันอาทิตย์ห้องสมุดปิด ไม่สามารถแพลนได้ค่ะ');\r\n        return;\r\n      }\r\n\r\n      const localISOString = new Date(\r\n        eventDate.getFullYear(),\r\n        eventDate.getMonth(),\r\n        eventDate.getDate(),\r\n        12, 0, 0, 0\r\n      ).toISOString();\r\n\r\n      const scheduleData = {\r\n        title: eventData.title || selectedEvent?.title || 'Event',\r\n        notes: eventData.notes || '',\r\n        date: localISOString,\r\n        dayOfWeek: eventDate.getDay(),\r\n        timeSlot: {\r\n          startTime: `${startHour.toString().padStart(2, '0')}:00`,\r\n          endTime: `${endHour.toString().padStart(2, '0')}:00`,\r\n        },\r\n        duration,\r\n        instructor: user?.id,\r\n        instructorName: user?.fullName || 'Unknown',\r\n        room: selectedEvent?.room || `Room ${Math.floor(Math.random() * 400) + 100}`,\r\n        color: getColorByDay(eventDate),\r\n        type: 'lecture',\r\n        status: 'scheduled',\r\n      };\r\n\r\n      if (selectedEvent) {\r\n        await scheduleAPI.update(selectedEvent._id, scheduleData);\r\n      } else {\r\n        await scheduleAPI.create(scheduleData);\r\n      }\r\n\r\n      setShowPopup(false);\r\n      setSelectedDateTime(null);\r\n      setSelectedEvent(null);\r\n\r\n      await loadSchedules();\r\n\r\n      alert('Event saved successfully!');\r\n    } catch (error) {\r\n      console.error('Error saving event:', error);\r\n      alert('Error saving event: ' + (error.response?.data?.error || error.message));\r\n    }\r\n  };\r\n\r\n  const getColorByDay = (dateObj) => {\r\n    const d = dateObj.getDay();\r\n    const dayColors = {\r\n      1: '#facc15',\r\n      2: '#ec4899',\r\n      3: '#22c55e',\r\n      4: '#f97316',\r\n      5: '#06b6d4',\r\n      6: '#8b5cf6',\r\n      0: '#9ca3af',\r\n    };\r\n    return dayColors[d] || '#3b82f6';\r\n  };\r\n\r\n  const navigateWeek = (direction) => {\r\n    const newDate = new Date(currentDate);\r\n    newDate.setDate(newDate.getDate() + (direction * 7));\r\n    setCurrentDate(newDate);\r\n  };\r\n\r\n  const formatDateRange = () => {\r\n    const startOfWeek = new Date(currentDate);\r\n    const currentDay = startOfWeek.getDay();\r\n    const diff = currentDay === 0 ? -6 : 1 - currentDay;\r\n    startOfWeek.setDate(startOfWeek.getDate() + diff);\r\n\r\n    const endOfWeek = new Date(startOfWeek);\r\n    endOfWeek.setDate(startOfWeek.getDate() + 6);\r\n\r\n    const months = [\r\n      'January', 'February', 'March', 'April', 'May', 'June',\r\n      'July', 'August', 'September', 'October', 'November', 'December'\r\n    ];\r\n\r\n    return `${months[startOfWeek.getMonth()]} ${startOfWeek.getDate()} - ${endOfWeek.getDate()}, ${startOfWeek.getFullYear()}`;\r\n  };\r\n\r\n  return (\r\n    <div className=\"planning-page\">\r\n      <div className=\"planning-header\">\r\n        <h1>Planning</h1>\r\n        <div className=\"header-info\">\r\n          <span>Constructor</span>\r\n          <span>\r\n            Time {now.getHours().toString().padStart(2, '0')}:{now.getMinutes().toString().padStart(2, '0')}\r\n          </span>\r\n          <span>\r\n            Day {now.getDate()}.{(now.getMonth() + 1).toString().padStart(2, '0')}.{now.getFullYear().toString().slice(-2)}\r\n          </span>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"calendar-controls\">\r\n        <button onClick={() => navigateWeek(-1)}>← Previous Week</button>\r\n        <div className=\"date-range\">{formatDateRange()}</div>\r\n        <button onClick={() => navigateWeek(1)}>Next Week →</button>\r\n      </div>\r\n\r\n      <WeeklyCalendar\r\n        schedules={schedules}\r\n        onEventClick={handleEventClick}\r\n        onCellClick={handleCellClick}\r\n        currentDate={currentDate}\r\n      />\r\n\r\n      <EventPopup\r\n        isOpen={showPopup}\r\n        onClose={() => {\r\n          setShowPopup(false);\r\n          setSelectedDateTime(null);\r\n          setSelectedEvent(null);\r\n        }}\r\n        onSave={handleSaveEvent}\r\n        eventData={selectedEvent}\r\n        type={popupType}\r\n      />\r\n\r\n      {/* ✅ Reserve: กดได้เมื่อมีแพลนอย่างน้อย 1 อัน */}\r\n      <button\r\n        className=\"reserve-btn\"\r\n        onClick={handleReserve}\r\n        disabled={schedules.length === 0}\r\n      >\r\n        Reserve\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Planning;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}